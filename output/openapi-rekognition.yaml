openapi: 3.0.0
info:
  title: Rekognition
  version: 1.0.0
paths: {}
components:
  schemas:
    Arn:
      type: string
      maxLength: 2048
      pattern: >-
        (^arn:[a-z\d-]+:rekognition:[a-z\d-]+:\d{12}:project/[a-zA-Z0-9_.\-]{1,255}/[0-9]+$)
    CollectionId:
      description: The name of the collection
      type: string
      maxLength: 255
      pattern: \A[a-zA-Z0-9_\.\-]+$
    Tag:
      description: A key-value pair to associate with a resource.
      type: object
      properties:
        Key:
          type: string
          description: >-
            The key name of the tag. You can specify a value that is 1 to 128
            Unicode characters in length and cannot be prefixed with aws:. You
            can use any of the following characters: the set of Unicode letters,
            digits, whitespace, _, ., /, =, +, and -.
          maxLength: 128
          pattern: \A(?!aws:)[a-zA-Z0-9+\-=\._\:\/@]+$
        Value:
          type: string
          description: >-
            The value for the tag. You can specify a value that is 0 to 256
            Unicode characters in length and cannot be prefixed with aws:. You
            can use any of the following characters: the set of Unicode letters,
            digits, whitespace, _, ., /, =, +, and -.
          maxLength: 256
          pattern: \A[a-zA-Z0-9+\-=\._\:\/@]+$
      required:
        - Key
        - Value
      additionalProperties: false
    Collection:
      type: object
      properties:
        Arn:
          $ref: '#/components/schemas/Arn'
          x-is-top-level-property: true
        CollectionId:
          $ref: '#/components/schemas/CollectionId'
          x-is-top-level-property: true
        Tags:
          description: An array of key-value pairs to apply to this resource.
          type: array
          uniqueItems: true
          x-insertionOrder: false
          minItems: 0
          maxItems: 200
          items:
            $ref: '#/components/schemas/Tag'
          x-is-top-level-property: true
      required:
        - CollectionId
      x-stackql-resource-name: Collection
    ProjectName:
      description: The name of the project
      type: string
      minLength: 1
      maxLength: 255
      pattern: '[a-zA-Z0-9][a-zA-Z0-9_\-]*'
    Project:
      type: object
      properties:
        Arn:
          $ref: '#/components/schemas/Arn'
          x-is-top-level-property: true
        ProjectName:
          $ref: '#/components/schemas/ProjectName'
          x-is-top-level-property: true
      required:
        - ProjectName
      x-stackql-resource-name: Project
x-stackql-views:
  - Collection:
      name: Collection
      id: aws.rekognition.Collection
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Tags') as tags

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::Rekognition::Collection' ;
  - Project:
      name: Project
      id: aws.rekognition.Project
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::Rekognition::Project' ;
