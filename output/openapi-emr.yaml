openapi: 3.0.0
info:
  title: EMR
  version: 1.0.0
paths: {}
components:
  schemas:
    EbsConfiguration:
      type: object
      additionalProperties: false
      properties:
        EbsBlockDeviceConfigs:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/EbsBlockDeviceConfig'
        EbsOptimized:
          type: boolean
    KeyValue:
      type: object
      additionalProperties: false
      properties:
        Key:
          type: string
        Value:
          type: string
    Configuration:
      type: object
      additionalProperties: false
      properties:
        ConfigurationProperties:
          type: object
          x-patternProperties:
            '[a-zA-Z0-9]+':
              type: string
        Configurations:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/Configuration'
        Classification:
          type: string
    StepConfig:
      type: object
      additionalProperties: false
      properties:
        HadoopJarStep:
          $ref: '#/components/schemas/HadoopJarStepConfig'
        ActionOnFailure:
          type: string
        Name:
          type: string
      required:
        - HadoopJarStep
        - Name
    InstanceFleetConfig:
      type: object
      properties:
        InstanceFleetType:
          type: string
          x-is-top-level-property: true
        TargetOnDemandCapacity:
          type: integer
          x-is-top-level-property: true
        ClusterId:
          type: string
          x-is-top-level-property: true
        TargetSpotCapacity:
          type: integer
          x-is-top-level-property: true
        LaunchSpecifications:
          $ref: '#/components/schemas/InstanceFleetProvisioningSpecifications'
          x-is-top-level-property: true
        Id:
          type: string
          x-is-top-level-property: true
        InstanceTypeConfigs:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/InstanceTypeConfig'
          x-is-top-level-property: true
        Name:
          type: string
          x-is-top-level-property: true
      required:
        - InstanceFleetType
        - ClusterId
      x-stackql-resource-name: InstanceFleetConfig
    InstanceTypeConfig:
      type: object
      additionalProperties: false
      properties:
        BidPrice:
          type: string
        WeightedCapacity:
          type: integer
        EbsConfiguration:
          $ref: '#/components/schemas/EbsConfiguration'
        BidPriceAsPercentageOfOnDemandPrice:
          type: number
        CustomAmiId:
          type: string
        Configurations:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/Configuration'
        InstanceType:
          type: string
      required:
        - InstanceType
    SpotProvisioningSpecification:
      type: object
      additionalProperties: false
      properties:
        AllocationStrategy:
          type: string
        TimeoutDurationMinutes:
          type: integer
        TimeoutAction:
          type: string
        BlockDurationMinutes:
          type: integer
      required:
        - TimeoutDurationMinutes
        - TimeoutAction
    ScriptBootstrapActionConfig:
      type: object
      additionalProperties: false
      properties:
        Path:
          type: string
        Args:
          type: array
          uniqueItems: true
          items:
            type: string
      required:
        - Path
    InstanceFleetProvisioningSpecifications:
      type: object
      additionalProperties: false
      properties:
        SpotSpecification:
          $ref: '#/components/schemas/SpotProvisioningSpecification'
        OnDemandSpecification:
          $ref: '#/components/schemas/OnDemandProvisioningSpecification'
    SimpleScalingPolicyConfiguration:
      type: object
      additionalProperties: false
      properties:
        ScalingAdjustment:
          type: integer
        CoolDown:
          type: integer
        AdjustmentType:
          type: string
      required:
        - ScalingAdjustment
    OnDemandProvisioningSpecification:
      type: object
      additionalProperties: false
      properties:
        AllocationStrategy:
          type: string
      required:
        - AllocationStrategy
    ScalingTrigger:
      type: object
      additionalProperties: false
      properties:
        CloudWatchAlarmDefinition:
          $ref: '#/components/schemas/CloudWatchAlarmDefinition'
      required:
        - CloudWatchAlarmDefinition
    ManagedScalingPolicy:
      type: object
      additionalProperties: false
      properties:
        ComputeLimits:
          $ref: '#/components/schemas/ComputeLimits'
    InstanceGroupConfig:
      type: object
      properties:
        JobFlowId:
          type: string
          x-is-top-level-property: true
        AutoScalingPolicy:
          $ref: '#/components/schemas/AutoScalingPolicy'
          x-is-top-level-property: true
        BidPrice:
          type: string
          x-is-top-level-property: true
        InstanceCount:
          type: integer
          x-is-top-level-property: true
        EbsConfiguration:
          $ref: '#/components/schemas/EbsConfiguration'
          x-is-top-level-property: true
        InstanceRole:
          type: string
          x-is-top-level-property: true
        CustomAmiId:
          type: string
          x-is-top-level-property: true
        Id:
          type: string
          x-is-top-level-property: true
        Configurations:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/Configuration'
          x-is-top-level-property: true
        InstanceType:
          type: string
          x-is-top-level-property: true
        Market:
          type: string
          x-is-top-level-property: true
        Name:
          type: string
          x-is-top-level-property: true
      required:
        - JobFlowId
        - InstanceCount
        - InstanceRole
        - InstanceType
      x-stackql-resource-name: InstanceGroupConfig
    HadoopJarStepConfig:
      type: object
      additionalProperties: false
      properties:
        Args:
          type: array
          uniqueItems: true
          items:
            type: string
        Jar:
          type: string
        MainClass:
          type: string
        StepProperties:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/KeyValue'
      required:
        - Jar
    VolumeSpecification:
      type: object
      additionalProperties: false
      properties:
        SizeInGB:
          type: integer
        VolumeType:
          type: string
        Iops:
          type: integer
      required:
        - SizeInGB
        - VolumeType
    CloudWatchAlarmDefinition:
      type: object
      additionalProperties: false
      properties:
        MetricName:
          type: string
        ComparisonOperator:
          type: string
        Statistic:
          type: string
        Dimensions:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/MetricDimension'
        Period:
          type: integer
        EvaluationPeriods:
          type: integer
        Unit:
          type: string
        Namespace:
          type: string
        Threshold:
          type: number
      required:
        - MetricName
        - ComparisonOperator
        - Period
        - Threshold
    AutoTerminationPolicy:
      type: object
      additionalProperties: false
      properties:
        IdleTimeout:
          type: integer
    KerberosAttributes:
      type: object
      additionalProperties: false
      properties:
        KdcAdminPassword:
          type: string
        Realm:
          type: string
        ADDomainJoinPassword:
          type: string
        ADDomainJoinUser:
          type: string
        CrossRealmTrustPrincipalPassword:
          type: string
      required:
        - KdcAdminPassword
        - Realm
    JobFlowInstancesConfig:
      type: object
      additionalProperties: false
      properties:
        MasterInstanceFleet:
          $ref: '#/components/schemas/InstanceFleetConfig'
        AdditionalSlaveSecurityGroups:
          type: array
          uniqueItems: true
          items:
            type: string
        CoreInstanceFleet:
          $ref: '#/components/schemas/InstanceFleetConfig'
        CoreInstanceGroup:
          $ref: '#/components/schemas/InstanceGroupConfig'
        Ec2SubnetIds:
          type: array
          uniqueItems: true
          items:
            type: string
        HadoopVersion:
          type: string
        TerminationProtected:
          type: boolean
        KeepJobFlowAliveWhenNoSteps:
          type: boolean
        Ec2KeyName:
          type: string
        MasterInstanceGroup:
          $ref: '#/components/schemas/InstanceGroupConfig'
        Placement:
          $ref: '#/components/schemas/PlacementType'
        TaskInstanceFleets:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/InstanceFleetConfig'
        Ec2SubnetId:
          type: string
        TaskInstanceGroups:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/InstanceGroupConfig'
        ServiceAccessSecurityGroup:
          type: string
        EmrManagedSlaveSecurityGroup:
          type: string
        AdditionalMasterSecurityGroups:
          type: array
          uniqueItems: true
          items:
            type: string
        EmrManagedMasterSecurityGroup:
          type: string
    ScalingAction:
      type: object
      additionalProperties: false
      properties:
        Market:
          type: string
        SimpleScalingPolicyConfiguration:
          $ref: '#/components/schemas/SimpleScalingPolicyConfiguration'
      required:
        - SimpleScalingPolicyConfiguration
    EbsBlockDeviceConfig:
      type: object
      additionalProperties: false
      properties:
        VolumeSpecification:
          $ref: '#/components/schemas/VolumeSpecification'
        VolumesPerInstance:
          type: integer
      required:
        - VolumeSpecification
    ScalingRule:
      type: object
      additionalProperties: false
      properties:
        Action:
          $ref: '#/components/schemas/ScalingAction'
        Description:
          type: string
        Trigger:
          $ref: '#/components/schemas/ScalingTrigger'
        Name:
          type: string
      required:
        - Action
        - Trigger
        - Name
    ComputeLimits:
      type: object
      additionalProperties: false
      properties:
        MaximumOnDemandCapacityUnits:
          type: integer
        MaximumCapacityUnits:
          type: integer
        MaximumCoreCapacityUnits:
          type: integer
        MinimumCapacityUnits:
          type: integer
        UnitType:
          type: string
      required:
        - UnitType
        - MaximumCapacityUnits
        - MinimumCapacityUnits
    MetricDimension:
      type: object
      additionalProperties: false
      properties:
        Value:
          type: string
        Key:
          type: string
      required:
        - Value
        - Key
    BootstrapActionConfig:
      type: object
      additionalProperties: false
      properties:
        ScriptBootstrapAction:
          $ref: '#/components/schemas/ScriptBootstrapActionConfig'
        Name:
          type: string
      required:
        - ScriptBootstrapAction
        - Name
    AutoScalingPolicy:
      type: object
      additionalProperties: false
      properties:
        Rules:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/ScalingRule'
        Constraints:
          $ref: '#/components/schemas/ScalingConstraints'
      required:
        - Constraints
        - Rules
    PlacementType:
      type: object
      additionalProperties: false
      properties:
        AvailabilityZone:
          type: string
      required:
        - AvailabilityZone
    ScalingConstraints:
      type: object
      additionalProperties: false
      properties:
        MinCapacity:
          type: integer
        MaxCapacity:
          type: integer
      required:
        - MinCapacity
        - MaxCapacity
    Tag:
      description: A key-value pair to associate with a resource.
      type: object
      additionalProperties: false
      properties:
        Key:
          type: string
          description: >-
            The value for the tag. You can specify a value that is 1 to 128
            Unicode characters in length. You can use any of the following
            characters: the set of Unicode letters, digits, whitespace, _, ., /,
            =, +, and -. 
          minLength: 1
          maxLength: 128
          pattern: ^[A-Za-z0-9 /_.:=+@-]+$
        Value:
          type: string
          description: >-
            The value for the tag. You can specify a value that is 0 to 256
            Unicode characters in length. You can use any of the following
            characters: the set of Unicode letters, digits, whitespace, _, ., /,
            =, +, and -. 
          minLength: 0
          maxLength: 256
          pattern: ^[A-Za-z0-9 /_.:=+@-]*$
      required:
        - Key
        - Value
    Application:
      type: object
      properties:
        Architecture:
          $ref: '#/components/schemas/Architecture'
          x-is-top-level-property: true
        Name:
          description: User friendly Application name.
          type: string
          minLength: 1
          maxLength: 64
          pattern: ^[A-Za-z0-9._\/#-]+$
          x-is-top-level-property: true
        ReleaseLabel:
          description: EMR release label.
          type: string
          minLength: 1
          maxLength: 64
          pattern: ^[A-Za-z0-9._/-]+$
          x-is-top-level-property: true
        Type:
          description: The type of the application
          type: string
          x-is-top-level-property: true
        InitialCapacity:
          description: Initial capacity initialized when an Application is started.
          $ref: '#/components/schemas/InitialCapacityConfigMap'
          x-is-top-level-property: true
        MaximumCapacity:
          description: >-
            Maximum allowed cumulative resources for an Application. No new
            resources will be created once the limit is hit.
          $ref: '#/components/schemas/MaximumAllowedResources'
          x-is-top-level-property: true
        Tags:
          description: Tag map with key and value
          type: array
          uniqueItems: true
          x-insertionOrder: false
          items:
            $ref: '#/components/schemas/Tag'
          x-is-top-level-property: true
        AutoStartConfiguration:
          description: Configuration for Auto Start of Application.
          $ref: '#/components/schemas/AutoStartConfiguration'
          x-is-top-level-property: true
        AutoStopConfiguration:
          description: Configuration for Auto Stop of Application.
          $ref: '#/components/schemas/AutoStopConfiguration'
          x-is-top-level-property: true
        ImageConfiguration:
          $ref: '#/components/schemas/ImageConfigurationInput'
          x-is-top-level-property: true
        NetworkConfiguration:
          description: Network Configuration for customer VPC connectivity.
          $ref: '#/components/schemas/NetworkConfiguration'
          x-is-top-level-property: true
        Arn:
          description: The Amazon Resource Name (ARN) of the EMR Serverless Application.
          type: string
          x-is-top-level-property: true
        ApplicationId:
          description: The ID of the EMR Serverless Application.
          type: string
          minLength: 1
          maxLength: 64
          x-is-top-level-property: true
        WorkerTypeSpecifications:
          $ref: '#/components/schemas/WorkerTypeSpecificationInputMap'
          x-is-top-level-property: true
      required:
        - ReleaseLabel
        - Type
      x-stackql-resource-name: Application
    Cluster:
      type: object
      properties:
        Steps:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/StepConfig'
          x-is-top-level-property: true
        StepConcurrencyLevel:
          type: integer
          x-is-top-level-property: true
        EbsRootVolumeSize:
          type: integer
          x-is-top-level-property: true
        OSReleaseLabel:
          type: string
          x-is-top-level-property: true
        Name:
          type: string
          x-is-top-level-property: true
        ServiceRole:
          type: string
          x-is-top-level-property: true
        LogUri:
          type: string
          x-is-top-level-property: true
        BootstrapActions:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/BootstrapActionConfig'
          x-is-top-level-property: true
        MasterPublicDNS:
          type: string
          x-is-top-level-property: true
        Configurations:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/Configuration'
          x-is-top-level-property: true
        ReleaseLabel:
          type: string
          x-is-top-level-property: true
        Tags:
          type: array
          uniqueItems: false
          items:
            $ref: '#/components/schemas/Tag'
          x-is-top-level-property: true
        ManagedScalingPolicy:
          $ref: '#/components/schemas/ManagedScalingPolicy'
          x-is-top-level-property: true
        LogEncryptionKmsKeyId:
          type: string
          x-is-top-level-property: true
        AdditionalInfo:
          type: object
          x-is-top-level-property: true
        AutoTerminationPolicy:
          $ref: '#/components/schemas/AutoTerminationPolicy'
          x-is-top-level-property: true
        KerberosAttributes:
          $ref: '#/components/schemas/KerberosAttributes'
          x-is-top-level-property: true
        Applications:
          type: array
          uniqueItems: true
          items:
            $ref: '#/components/schemas/Application'
          x-is-top-level-property: true
        AutoScalingRole:
          type: string
          x-is-top-level-property: true
        CustomAmiId:
          type: string
          x-is-top-level-property: true
        Instances:
          $ref: '#/components/schemas/JobFlowInstancesConfig'
          x-is-top-level-property: true
        ScaleDownBehavior:
          type: string
          x-is-top-level-property: true
        JobFlowRole:
          type: string
          x-is-top-level-property: true
        VisibleToAllUsers:
          type: boolean
          x-is-top-level-property: true
        SecurityConfiguration:
          type: string
          x-is-top-level-property: true
        Id:
          type: string
          x-is-top-level-property: true
      required:
        - Instances
        - ServiceRole
        - JobFlowRole
        - Name
      x-stackql-resource-name: Cluster
    SecurityConfiguration:
      type: object
      properties:
        Name:
          description: The name of the security configuration.
          type: string
          x-is-top-level-property: true
        SecurityConfiguration:
          description: The security configuration details in JSON format.
          type:
            - object
            - string
          x-is-top-level-property: true
      required:
        - SecurityConfiguration
      x-stackql-resource-name: SecurityConfiguration
    Step:
      type: object
      properties:
        Id:
          type: string
          x-is-top-level-property: true
        ActionOnFailure:
          type: string
          x-is-top-level-property: true
        HadoopJarStep:
          $ref: '#/components/schemas/HadoopJarStepConfig'
          x-is-top-level-property: true
        JobFlowId:
          type: string
          x-is-top-level-property: true
        Name:
          type: string
          x-is-top-level-property: true
      required:
        - JobFlowId
        - HadoopJarStep
        - ActionOnFailure
        - Name
      x-stackql-resource-name: Step
    SubnetId:
      description: Identifier of a subnet
      type: string
      minLength: 1
      maxLength: 32
      pattern: ^[-0-9a-zA-Z]+
    Arn:
      type: string
      pattern: ^arn:aws(-(cn|us-gov))?:[a-z-]+:(([a-z]+-)+[0-9])?:([0-9]{12})?:[^.]+$
    Tags:
      type: array
      x-insertionOrder: false
      uniqueItems: true
      items:
        $ref: '#/components/schemas/Tag'
    Studio:
      type: object
      properties:
        Arn:
          description: The Amazon Resource Name (ARN) of the EMR Studio.
          $ref: '#/components/schemas/Arn'
          x-is-top-level-property: true
        AuthMode:
          type: string
          description: >-
            Specifies whether the Studio authenticates users using single
            sign-on (SSO) or IAM. Amazon EMR Studio currently only supports SSO
            authentication.
          enum:
            - SSO
            - IAM
          x-is-top-level-property: true
        DefaultS3Location:
          description: >-
            The default Amazon S3 location to back up EMR Studio Workspaces and
            notebook files. A Studio user can select an alternative Amazon S3
            location when creating a Workspace.
          type: string
          minLength: 6
          maxLength: 10280
          pattern: ^s3://.*
          x-is-top-level-property: true
        Description:
          description: A detailed description of the Studio.
          type: string
          minLength: 0
          maxLength: 256
          x-is-top-level-property: true
        EngineSecurityGroupId:
          description: >-
            The ID of the Amazon EMR Studio Engine security group. The Engine
            security group allows inbound network traffic from the Workspace
            security group, and it must be in the same VPC specified by VpcId.
          type: string
          minLength: 4
          maxLength: 256
          pattern: ^sg-[a-zA-Z0-9\-._]+$
          x-is-top-level-property: true
        Name:
          description: A descriptive name for the Amazon EMR Studio.
          type: string
          minLength: 1
          maxLength: 256
          pattern: '[a-zA-Z0-9_-]+'
          x-is-top-level-property: true
        ServiceRole:
          description: >-
            The IAM role that will be assumed by the Amazon EMR Studio. The
            service role provides a way for Amazon EMR Studio to interoperate
            with other AWS services.
          $ref: '#/components/schemas/Arn'
          x-is-top-level-property: true
        StudioId:
          description: The ID of the EMR Studio.
          type: string
          pattern: ^es-[0-9A-Z]+
          minLength: 4
          maxLength: 256
          x-is-top-level-property: true
        SubnetIds:
          description: >-
            A list of up to 5 subnet IDs to associate with the Studio. The
            subnets must belong to the VPC specified by VpcId. Studio users can
            create a Workspace in any of the specified subnets.
          type: array
          minItems: 1
          items:
            $ref: '#/components/schemas/SubnetId'
          x-is-top-level-property: true
        Tags:
          description: >-
            A list of tags to associate with the Studio. Tags are user-defined
            key-value pairs that consist of a required key string with a maximum
            of 128 characters, and an optional value string with a maximum of
            256 characters.
          $ref: '#/components/schemas/Tags'
          x-is-top-level-property: true
        Url:
          description: The unique Studio access URL.
          type: string
          pattern: ^https://[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])(:[0-9]*)*([?/#].*)?$
          maxLength: 4096
          x-is-top-level-property: true
        UserRole:
          description: >-
            The IAM user role that will be assumed by users and groups logged in
            to a Studio. The permissions attached to this IAM role can be scoped
            down for each user or group using session policies.
          $ref: '#/components/schemas/Arn'
          x-is-top-level-property: true
        VpcId:
          description: >-
            The ID of the Amazon Virtual Private Cloud (Amazon VPC) to associate
            with the Studio.
          type: string
          pattern: ^(vpc-[0-9a-f]{8}|vpc-[0-9a-f]{17})$
          x-is-top-level-property: true
        WorkspaceSecurityGroupId:
          description: >-
            The ID of the Amazon EMR Studio Workspace security group. The
            Workspace security group allows outbound network traffic to
            resources in the Engine security group, and it must be in the same
            VPC specified by VpcId.
          type: string
          pattern: ^sg-[a-zA-Z0-9\-._]+$
          x-is-top-level-property: true
        IdpAuthUrl:
          description: >-
            Your identity provider's authentication endpoint. Amazon EMR Studio
            redirects federated users to this endpoint for authentication when
            logging in to a Studio with the Studio URL.
          type: string
          pattern: ^https://[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z])(:[0-9]*)*([?/#].*)?$
          maxLength: 4096
          x-is-top-level-property: true
        IdpRelayStateParameterName:
          description: The name of relay state parameter for external Identity Provider.
          type: string
          minLength: 0
          maxLength: 256
          x-is-top-level-property: true
      required:
        - AuthMode
        - EngineSecurityGroupId
        - Name
        - ServiceRole
        - SubnetIds
        - VpcId
        - WorkspaceSecurityGroupId
        - DefaultS3Location
      x-stackql-resource-name: Studio
    IamPolicyArn:
      type: string
      pattern: ^arn:aws(-(cn|us-gov))?:iam::([0-9]{12})?:policy\/[^.]+$
    StudioSessionMapping:
      type: object
      properties:
        IdentityName:
          type: string
          description: >-
            The name of the user or group. For more information, see UserName
            and DisplayName in the AWS SSO Identity Store API Reference. Either
            IdentityName or IdentityId must be specified.
          x-is-top-level-property: true
        IdentityType:
          type: string
          description: >-
            Specifies whether the identity to map to the Studio is a user or a
            group.
          enum:
            - USER
            - GROUP
          x-is-top-level-property: true
        SessionPolicyArn:
          description: >-
            The Amazon Resource Name (ARN) for the session policy that will be
            applied to the user or group. Session policies refine Studio user
            permissions without the need to use multiple IAM user roles.
          $ref: '#/components/schemas/IamPolicyArn'
          x-is-top-level-property: true
        StudioId:
          description: >-
            The ID of the Amazon EMR Studio to which the user or group will be
            mapped.
          type: string
          pattern: ^es-[0-9A-Z]+
          minLength: 4
          maxLength: 256
          x-is-top-level-property: true
      required:
        - StudioId
        - IdentityName
        - IdentityType
        - SessionPolicyArn
      x-stackql-resource-name: StudioSessionMapping
    ContainerProvider:
      type: object
      additionalProperties: false
      properties:
        Type:
          description: The type of the container provider
          type: string
        Id:
          description: The ID of the container cluster
          type: string
          minLength: 1
          maxLength: 100
          pattern: ^[0-9A-Za-z][A-Za-z0-9\-_]*
        Info:
          $ref: '#/components/schemas/ContainerInfo'
      required:
        - Type
        - Id
        - Info
    ContainerInfo:
      type: object
      additionalProperties: false
      properties:
        EksInfo:
          $ref: '#/components/schemas/EksInfo'
      required:
        - EksInfo
    EksInfo:
      type: object
      additionalProperties: false
      properties:
        Namespace:
          type: string
          minLength: 1
          maxLength: 63
          pattern: '[a-z0-9]([-a-z0-9]*[a-z0-9])?'
      required:
        - Namespace
    VirtualCluster:
      type: object
      properties:
        Arn:
          type: string
          x-is-top-level-property: true
        ContainerProvider:
          description: Container provider of the virtual cluster.
          $ref: '#/components/schemas/ContainerProvider'
          x-is-top-level-property: true
        Id:
          description: Id of the virtual cluster.
          type: string
          minLength: 1
          maxLength: 64
          x-is-top-level-property: true
        Name:
          description: Name of the virtual cluster.
          type: string
          minLength: 1
          maxLength: 64
          pattern: '[\.\-_/#A-Za-z0-9]+'
          x-is-top-level-property: true
        Tags:
          description: An array of key-value pairs to apply to this virtual cluster.
          type: array
          uniqueItems: true
          x-insertionOrder: false
          items:
            $ref: '#/components/schemas/Tag'
          x-is-top-level-property: true
      required:
        - Name
        - ContainerProvider
      x-stackql-resource-name: VirtualCluster
    Architecture:
      description: The cpu architecture of an application.
      enum:
        - ARM64
        - X86_64
      type: string
    ImageConfigurationInput:
      type: object
      description: The image configuration.
      properties:
        ImageUri:
          type: string
          maxLength: 1024
          minLength: 1
          pattern: >-
            ^([a-z0-9]+[a-z0-9-.]*)\/((?:[a-z0-9]+(?:[._-][a-z0-9]+)*\/)*[a-z0-9]+(?:[._-][a-z0-9]+)*)(?:\:([a-zA-Z0-9_][a-zA-Z0-9-._]{0,299})|@(sha256:[0-9a-f]{64}))$
          description: >-
            The URI of an image in the Amazon ECR registry. This field is
            required when you create a new application. If you leave this field
            blank in an update, Amazon EMR will remove the image configuration.
      additionalProperties: false
    InitialCapacityConfigMap:
      type: array
      uniqueItems: true
      x-insertionOrder: false
      items:
        $ref: '#/components/schemas/InitialCapacityConfigKeyValuePair'
    InitialCapacityConfigKeyValuePair:
      type: object
      additionalProperties: false
      properties:
        Key:
          description: Worker type for an analytics framework.
          type: string
          minLength: 1
          maxLength: 50
          pattern: ^[a-zA-Z]+[-_]*[a-zA-Z]+$
        Value:
          $ref: '#/components/schemas/InitialCapacityConfig'
      required:
        - Key
        - Value
    InitialCapacityConfig:
      type: object
      additionalProperties: false
      properties:
        WorkerCount:
          description: >-
            Initial count of workers to be initialized when an Application is
            started. This count will be continued to be maintained until the
            Application is stopped
          type: integer
          format: int64
          minimum: 1
          maximum: 1000000
        WorkerConfiguration:
          $ref: '#/components/schemas/WorkerConfiguration'
      required:
        - WorkerCount
        - WorkerConfiguration
    WorkerConfiguration:
      type: object
      additionalProperties: false
      properties:
        Cpu:
          description: >-
            Per worker CPU resource. vCPU is the only supported unit and
            specifying vCPU is optional.
          $ref: '#/components/schemas/CpuSize'
        Memory:
          description: >-
            Per worker memory resource. GB is the only supported unit and
            specifying GB is optional.
          $ref: '#/components/schemas/MemorySize'
        Disk:
          description: >-
            Per worker Disk resource. GB is the only supported unit and
            specifying GB is optional
          $ref: '#/components/schemas/DiskSize'
      required:
        - Cpu
        - Memory
    MaximumAllowedResources:
      type: object
      additionalProperties: false
      properties:
        Cpu:
          description: >-
            Per worker CPU resource. vCPU is the only supported unit and
            specifying vCPU is optional.
          $ref: '#/components/schemas/CpuSize'
        Memory:
          description: >-
            Per worker memory resource. GB is the only supported unit and
            specifying GB is optional.
          $ref: '#/components/schemas/MemorySize'
        Disk:
          description: >-
            Per worker Disk resource. GB is the only supported unit and
            specifying GB is optional
          $ref: '#/components/schemas/DiskSize'
      required:
        - Cpu
        - Memory
    AutoStartConfiguration:
      description: Configuration for Auto Start of Application
      type: object
      additionalProperties: false
      properties:
        Enabled:
          description: >-
            If set to true, the Application will automatically start. Defaults
            to true.
          type: boolean
          default: true
      required: []
    AutoStopConfiguration:
      description: Configuration for Auto Stop of Application
      type: object
      additionalProperties: false
      properties:
        Enabled:
          description: >-
            If set to true, the Application will automatically stop after being
            idle. Defaults to true.
          type: boolean
          default: true
        IdleTimeoutMinutes:
          type: integer
          description: >-
            The amount of time [in minutes] to wait before auto stopping the
            Application when idle. Defaults to 15 minutes.
      required: []
    NetworkConfiguration:
      type: object
      additionalProperties: false
      properties:
        SubnetIds:
          description: >-
            The ID of the subnets in the VPC to which you want to connect your
            job or application.
          type: array
          x-insertionOrder: false
          uniqueItems: true
          minItems: 1
          maxItems: 16
          items:
            $ref: '#/components/schemas/SubnetId'
        SecurityGroupIds:
          description: >-
            The ID of the security groups in the VPC to which you want to
            connect your job or application.
          type: array
          x-insertionOrder: false
          uniqueItems: true
          minItems: 1
          maxItems: 5
          items:
            $ref: '#/components/schemas/SecurityGroupId'
      required: []
    SecurityGroupId:
      description: Identifier of a security group
      type: string
      minLength: 1
      maxLength: 32
      pattern: ^[-0-9a-zA-Z]+
    CpuSize:
      description: >-
        Per worker CPU resource. vCPU is the only supported unit and specifying
        vCPU is optional.
      type: string
      minLength: 1
      maxLength: 15
      pattern: ^[1-9][0-9]*(\s)?(vCPU|vcpu|VCPU)?$
    MemorySize:
      description: >-
        Per worker memory resource. GB is the only supported unit and specifying
        GB is optional.
      type: string
      minLength: 1
      maxLength: 15
      pattern: ^[1-9][0-9]*(\s)?(GB|gb|gB|Gb)?$
    DiskSize:
      description: >-
        Per worker Disk resource. GB is the only supported unit and specifying
        GB is optional
      type: string
      minLength: 1
      maxLength: 15
      pattern: ^[1-9][0-9]*(\s)?(GB|gb|gB|Gb)$
    WorkerTypeSpecificationInput:
      type: object
      description: The specifications for a worker type.
      properties:
        ImageConfiguration:
          $ref: '#/components/schemas/ImageConfigurationInput'
      additionalProperties: false
    WorkerTypeSpecificationInputMap:
      type: object
      x-patternProperties:
        ^[a-zA-Z]+[-_]*[a-zA-Z]+$:
          $ref: '#/components/schemas/WorkerTypeSpecificationInput'
      additionalProperties: false
x-stackql-views:
  - InstanceFleetConfig:
      name: InstanceFleetConfig
      id: aws.emr.InstanceFleetConfig
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.InstanceFleetType') as
              instance_fleet_type,

              JSON_EXTRACT(Properties, '$.TargetOnDemandCapacity') as
              target_on_demand_capacity,

              JSON_EXTRACT(Properties, '$.ClusterId') as cluster_id,

              JSON_EXTRACT(Properties, '$.TargetSpotCapacity') as
              target_spot_capacity,

              JSON_EXTRACT(Properties,
              '$.LaunchSpecifications.SpotSpecification') as
              launch_specifications_spot_specification,

              JSON_EXTRACT(Properties,
              '$.LaunchSpecifications.OnDemandSpecification') as
              launch_specifications_on_demand_specification,

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.InstanceTypeConfigs') as
              instance_type_configs,

              JSON_EXTRACT(Properties, '$.Name') as name

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::InstanceFleetConfig' ;
  - InstanceGroupConfig:
      name: InstanceGroupConfig
      id: aws.emr.InstanceGroupConfig
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.JobFlowId') as job_flow_id,

              JSON_EXTRACT(Properties, '$.AutoScalingPolicy.Rules') as
              auto_scaling_policy_rules,

              JSON_EXTRACT(Properties, '$.AutoScalingPolicy.Constraints') as
              auto_scaling_policy_constraints,

              JSON_EXTRACT(Properties, '$.BidPrice') as bid_price,

              JSON_EXTRACT(Properties, '$.InstanceCount') as instance_count,

              JSON_EXTRACT(Properties,
              '$.EbsConfiguration.EbsBlockDeviceConfigs') as
              ebs_configuration_ebs_block_device_configs,

              JSON_EXTRACT(Properties, '$.EbsConfiguration.EbsOptimized') as
              ebs_configuration_ebs_optimized,

              JSON_EXTRACT(Properties, '$.InstanceRole') as instance_role,

              JSON_EXTRACT(Properties, '$.CustomAmiId') as custom_ami_id,

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.Configurations') as configurations,

              JSON_EXTRACT(Properties, '$.InstanceType') as instance_type,

              JSON_EXTRACT(Properties, '$.Market') as market,

              JSON_EXTRACT(Properties, '$.Name') as name

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::InstanceGroupConfig' ;
  - Application:
      name: Application
      id: aws.emr.Application
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Name') as name,

              JSON_EXTRACT(Properties, '$.ReleaseLabel') as release_label,

              JSON_EXTRACT(Properties, '$.Type') as type,

              JSON_EXTRACT(Properties, '$.MaximumCapacity.Cpu') as
              maximum_capacity_cpu,

              JSON_EXTRACT(Properties, '$.MaximumCapacity.Memory') as
              maximum_capacity_memory,

              JSON_EXTRACT(Properties, '$.MaximumCapacity.Disk') as
              maximum_capacity_disk,

              JSON_EXTRACT(Properties, '$.Tags') as tags,

              JSON_EXTRACT(Properties, '$.AutoStartConfiguration.Enabled') as
              auto_start_configuration_enabled,

              JSON_EXTRACT(Properties, '$.AutoStopConfiguration.Enabled') as
              auto_stop_configuration_enabled,

              JSON_EXTRACT(Properties,
              '$.AutoStopConfiguration.IdleTimeoutMinutes') as
              auto_stop_configuration_idle_timeout_minutes,

              JSON_EXTRACT(Properties, '$.ImageConfiguration.ImageUri') as
              image_configuration_image_uri,

              JSON_EXTRACT(Properties, '$.NetworkConfiguration.SubnetIds') as
              network_configuration_subnet_ids,

              JSON_EXTRACT(Properties,
              '$.NetworkConfiguration.SecurityGroupIds') as
              network_configuration_security_group_ids,

              JSON_EXTRACT(Properties, '$.Arn') as arn,

              JSON_EXTRACT(Properties, '$.ApplicationId') as application_id

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::Application' ;
  - Cluster:
      name: Cluster
      id: aws.emr.Cluster
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Steps') as steps,

              JSON_EXTRACT(Properties, '$.StepConcurrencyLevel') as
              step_concurrency_level,

              JSON_EXTRACT(Properties, '$.EbsRootVolumeSize') as
              ebs_root_volume_size,

              JSON_EXTRACT(Properties, '$.OSReleaseLabel') as o_srelease_label,

              JSON_EXTRACT(Properties, '$.Name') as name,

              JSON_EXTRACT(Properties, '$.ServiceRole') as service_role,

              JSON_EXTRACT(Properties, '$.LogUri') as log_uri,

              JSON_EXTRACT(Properties, '$.BootstrapActions') as
              bootstrap_actions,

              JSON_EXTRACT(Properties, '$.MasterPublicDNS') as
              master_public_dn_s,

              JSON_EXTRACT(Properties, '$.Configurations') as configurations,

              JSON_EXTRACT(Properties, '$.ReleaseLabel') as release_label,

              JSON_EXTRACT(Properties, '$.Tags') as tags,

              JSON_EXTRACT(Properties, '$.ManagedScalingPolicy.ComputeLimits')
              as managed_scaling_policy_compute_limits,

              JSON_EXTRACT(Properties, '$.LogEncryptionKmsKeyId') as
              log_encryption_kms_key_id,

              JSON_EXTRACT(Properties, '$.AdditionalInfo') as additional_info,

              JSON_EXTRACT(Properties, '$.AutoTerminationPolicy.IdleTimeout') as
              auto_termination_policy_idle_timeout,

              JSON_EXTRACT(Properties, '$.KerberosAttributes.KdcAdminPassword')
              as kerberos_attributes_kdc_admin_password,

              JSON_EXTRACT(Properties, '$.KerberosAttributes.Realm') as
              kerberos_attributes_realm,

              JSON_EXTRACT(Properties,
              '$.KerberosAttributes.ADDomainJoinPassword') as
              kerberos_attributes_ad_domain_join_password,

              JSON_EXTRACT(Properties, '$.KerberosAttributes.ADDomainJoinUser')
              as kerberos_attributes_ad_domain_join_user,

              JSON_EXTRACT(Properties,
              '$.KerberosAttributes.CrossRealmTrustPrincipalPassword') as
              kerberos_attributes_cross_realm_trust_principal_password,

              JSON_EXTRACT(Properties, '$.Applications') as applications,

              JSON_EXTRACT(Properties, '$.AutoScalingRole') as
              auto_scaling_role,

              JSON_EXTRACT(Properties, '$.CustomAmiId') as custom_ami_id,

              JSON_EXTRACT(Properties, '$.Instances.MasterInstanceFleet') as
              instances_master_instance_fleet,

              JSON_EXTRACT(Properties,
              '$.Instances.AdditionalSlaveSecurityGroups') as
              instances_additional_slave_security_groups,

              JSON_EXTRACT(Properties, '$.Instances.CoreInstanceFleet') as
              instances_core_instance_fleet,

              JSON_EXTRACT(Properties, '$.Instances.CoreInstanceGroup') as
              instances_core_instance_group,

              JSON_EXTRACT(Properties, '$.Instances.Ec2SubnetIds') as
              instances_ec2_subnet_ids,

              JSON_EXTRACT(Properties, '$.Instances.HadoopVersion') as
              instances_hadoop_version,

              JSON_EXTRACT(Properties, '$.Instances.TerminationProtected') as
              instances_termination_protected,

              JSON_EXTRACT(Properties,
              '$.Instances.KeepJobFlowAliveWhenNoSteps') as
              instances_keep_job_flow_alive_when_no_steps,

              JSON_EXTRACT(Properties, '$.Instances.Ec2KeyName') as
              instances_ec2_key_name,

              JSON_EXTRACT(Properties, '$.Instances.MasterInstanceGroup') as
              instances_master_instance_group,

              JSON_EXTRACT(Properties, '$.Instances.Placement') as
              instances_placement,

              JSON_EXTRACT(Properties, '$.Instances.TaskInstanceFleets') as
              instances_task_instance_fleets,

              JSON_EXTRACT(Properties, '$.Instances.Ec2SubnetId') as
              instances_ec2_subnet_id,

              JSON_EXTRACT(Properties, '$.Instances.TaskInstanceGroups') as
              instances_task_instance_groups,

              JSON_EXTRACT(Properties, '$.Instances.ServiceAccessSecurityGroup')
              as instances_service_access_security_group,

              JSON_EXTRACT(Properties,
              '$.Instances.EmrManagedSlaveSecurityGroup') as
              instances_emr_managed_slave_security_group,

              JSON_EXTRACT(Properties,
              '$.Instances.AdditionalMasterSecurityGroups') as
              instances_additional_master_security_groups,

              JSON_EXTRACT(Properties,
              '$.Instances.EmrManagedMasterSecurityGroup') as
              instances_emr_managed_master_security_group,

              JSON_EXTRACT(Properties, '$.ScaleDownBehavior') as
              scale_down_behavior,

              JSON_EXTRACT(Properties, '$.JobFlowRole') as job_flow_role,

              JSON_EXTRACT(Properties, '$.VisibleToAllUsers') as
              visible_to_all_users,

              JSON_EXTRACT(Properties, '$.SecurityConfiguration') as
              security_configuration,

              JSON_EXTRACT(Properties, '$.Id') as id

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::Cluster' ;
  - SecurityConfiguration:
      name: SecurityConfiguration
      id: aws.emr.SecurityConfiguration
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Name') as name,

              JSON_EXTRACT(Properties, '$.SecurityConfiguration') as
              security_configuration

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::SecurityConfiguration' ;
  - Step:
      name: Step
      id: aws.emr.Step
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.ActionOnFailure') as
              action_on_failure,

              JSON_EXTRACT(Properties, '$.HadoopJarStep.Args') as
              hadoop_jar_step_args,

              JSON_EXTRACT(Properties, '$.HadoopJarStep.Jar') as
              hadoop_jar_step_jar,

              JSON_EXTRACT(Properties, '$.HadoopJarStep.MainClass') as
              hadoop_jar_step_main_class,

              JSON_EXTRACT(Properties, '$.HadoopJarStep.StepProperties') as
              hadoop_jar_step_step_properties,

              JSON_EXTRACT(Properties, '$.JobFlowId') as job_flow_id,

              JSON_EXTRACT(Properties, '$.Name') as name

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::Step' ;
  - Studio:
      name: Studio
      id: aws.emr.Studio
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.AuthMode') as auth_mode,

              JSON_EXTRACT(Properties, '$.DefaultS3Location') as
              default_s3_location,

              JSON_EXTRACT(Properties, '$.Description') as description,

              JSON_EXTRACT(Properties, '$.EngineSecurityGroupId') as
              engine_security_group_id,

              JSON_EXTRACT(Properties, '$.Name') as name,

              JSON_EXTRACT(Properties, '$.StudioId') as studio_id,

              JSON_EXTRACT(Properties, '$.SubnetIds') as subnet_ids,

              JSON_EXTRACT(Properties, '$.Url') as url,

              JSON_EXTRACT(Properties, '$.VpcId') as vpc_id,

              JSON_EXTRACT(Properties, '$.WorkspaceSecurityGroupId') as
              workspace_security_group_id,

              JSON_EXTRACT(Properties, '$.IdpAuthUrl') as idp_auth_url,

              JSON_EXTRACT(Properties, '$.IdpRelayStateParameterName') as
              idp_relay_state_parameter_name

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::Studio' ;
  - StudioSessionMapping:
      name: StudioSessionMapping
      id: aws.emr.StudioSessionMapping
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.IdentityName') as identity_name,

              JSON_EXTRACT(Properties, '$.IdentityType') as identity_type,

              JSON_EXTRACT(Properties, '$.StudioId') as studio_id

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::StudioSessionMapping' ;
  - VirtualCluster:
      name: VirtualCluster
      id: aws.emr.VirtualCluster
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Arn') as arn,

              JSON_EXTRACT(Properties, '$.ContainerProvider.Type') as
              container_provider_type,

              JSON_EXTRACT(Properties, '$.ContainerProvider.Id') as
              container_provider_id,

              JSON_EXTRACT(Properties, '$.ContainerProvider.Info') as
              container_provider_info,

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.Name') as name,

              JSON_EXTRACT(Properties, '$.Tags') as tags

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EMR::VirtualCluster' ;
