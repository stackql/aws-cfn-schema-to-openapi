openapi: 3.0.0
info:
  title: EventSchemas
  version: 1.0.0
paths: {}
components:
  schemas:
    TagsEntry:
      type: object
      additionalProperties: false
      properties:
        Value:
          type: string
        Key:
          type: string
      required:
        - Value
        - Key
    Discoverer:
      type: object
      properties:
        DiscovererArn:
          type: string
          x-is-top-level-property: true
        DiscovererId:
          type: string
          x-is-top-level-property: true
        CrossAccount:
          type: boolean
          x-is-top-level-property: true
        Description:
          type: string
          x-is-top-level-property: true
        SourceArn:
          type: string
          x-is-top-level-property: true
        Tags:
          type: array
          uniqueItems: false
          items:
            $ref: '#/components/schemas/TagsEntry'
          x-is-top-level-property: true
      required:
        - SourceArn
      x-stackql-resource-name: Discoverer
    Registry:
      type: object
      properties:
        RegistryName:
          type: string
          x-is-top-level-property: true
        Description:
          type: string
          x-is-top-level-property: true
        Id:
          type: string
          x-is-top-level-property: true
        RegistryArn:
          type: string
          x-is-top-level-property: true
        Tags:
          type: array
          uniqueItems: false
          items:
            $ref: '#/components/schemas/TagsEntry'
          x-is-top-level-property: true
      required: []
      x-stackql-resource-name: Registry
    RegistryPolicy:
      type: object
      properties:
        Id:
          type: string
          x-is-top-level-property: true
        Policy:
          type: object
          x-is-top-level-property: true
        RegistryName:
          type: string
          x-is-top-level-property: true
        RevisionId:
          type: string
          x-is-top-level-property: true
      required:
        - RegistryName
        - Policy
      x-stackql-resource-name: RegistryPolicy
    Schema:
      type: object
      properties:
        Type:
          type: string
          x-is-top-level-property: true
        Description:
          type: string
          x-is-top-level-property: true
        SchemaVersion:
          type: string
          x-is-top-level-property: true
        Content:
          type: string
          x-is-top-level-property: true
        RegistryName:
          type: string
          x-is-top-level-property: true
        Id:
          type: string
          x-is-top-level-property: true
        SchemaArn:
          type: string
          x-is-top-level-property: true
        SchemaName:
          type: string
          x-is-top-level-property: true
        Tags:
          type: array
          uniqueItems: false
          items:
            $ref: '#/components/schemas/TagsEntry'
          x-is-top-level-property: true
      required:
        - Type
        - Content
        - RegistryName
      x-stackql-resource-name: Schema
x-stackql-views:
  - Discoverer:
      name: Discoverer
      id: aws.eventschemas.Discoverer
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.DiscovererArn') as discoverer_arn,

              JSON_EXTRACT(Properties, '$.DiscovererId') as discoverer_id,

              JSON_EXTRACT(Properties, '$.CrossAccount') as cross_account,

              JSON_EXTRACT(Properties, '$.Description') as description,

              JSON_EXTRACT(Properties, '$.SourceArn') as source_arn,

              JSON_EXTRACT(Properties, '$.Tags') as tags

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EventSchemas::Discoverer' ;
  - Registry:
      name: Registry
      id: aws.eventschemas.Registry
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.RegistryName') as registry_name,

              JSON_EXTRACT(Properties, '$.Description') as description,

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.RegistryArn') as registry_arn,

              JSON_EXTRACT(Properties, '$.Tags') as tags

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EventSchemas::Registry' ;
  - RegistryPolicy:
      name: RegistryPolicy
      id: aws.eventschemas.RegistryPolicy
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.Policy') as policy,

              JSON_EXTRACT(Properties, '$.RegistryName') as registry_name,

              JSON_EXTRACT(Properties, '$.RevisionId') as revision_id

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EventSchemas::RegistryPolicy' ;
  - Schema:
      name: Schema
      id: aws.eventschemas.Schema
      config:
        views:
          select:
            predicate: sqlDialect == "sqlite3"
            ddl: >-
              SELECT 

              JSON_EXTRACT(Properties, '$.Type') as type,

              JSON_EXTRACT(Properties, '$.Description') as description,

              JSON_EXTRACT(Properties, '$.SchemaVersion') as schema_version,

              JSON_EXTRACT(Properties, '$.Content') as content,

              JSON_EXTRACT(Properties, '$.RegistryName') as registry_name,

              JSON_EXTRACT(Properties, '$.Id') as id,

              JSON_EXTRACT(Properties, '$.SchemaArn') as schema_arn,

              JSON_EXTRACT(Properties, '$.SchemaName') as schema_name,

              JSON_EXTRACT(Properties, '$.Tags') as tags

              FROM aws.cloud_control.resources WHERE region = 'ap-southeast-1'
              and data__TypeName = 'AWS::EventSchemas::Schema' ;
